<!--
SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin

SPDX-License-Identifier: AGPL-3.0-or-later
-->

<!-- * (C) 2024 Catch Solve di Davide Montesin * License: AGPL -->
<checks>

	<check>
		<name>GpsInfo must be not 0,0</name>
		<category>GpsInfo must be not 0,0</category>
		<description>
			This rule checks that if GPS information is provided as a list, all entries in that list have valid coordinates (i.e., latitude and longitude are not 0).
			If there is no list (GpsInfo is not an array), the rule automatically passes.
		</description>
		<!-- dataset shortname, if * is tested on all datasets -->
		<dataset_shortname></dataset_shortname>
		<dataset_dataspace>tourism</dataset_dataspace>
		<!-- which programming language the rule is written. at the moment supported javascript and jsonlogic -->
		<rule_language>javascript</rule_language>
		<rule_code><![CDATA[

			!Array.isArray($.GpsInfo) || $.GpsInfo.every($ => $.Latitude != 0 && $.Longitude != 0)

		]]></rule_code>
	</check>

	<check>
	<name>GpsInfo must be inside Europe bounding box (if not 0,0)</name>
		<category>geolocation quality</category>
		<description>
			This rule checks that if GPS information is provided as a list, all entries have coordinates located within the approximate bounding box of Europe
			(Latitude between 34째 and 72째, Longitude between -25째 and 45째).  
			If coordinates are 0,0, the rule passes to avoid overlapping with the "GpsInfo must be not 0,0" check.
			If there is no list (GpsInfo is not an array), the rule automatically passes.
		</description>

		<dataset_shortname></dataset_shortname>
		<dataset_dataspace>tourism</dataset_dataspace>

		<rule_language>javascript</rule_language>
		<rule_code><![CDATA[
		
			!Array.isArray($.GpsInfo) || $.GpsInfo.every($ => 
				($.Latitude === 0 && $.Longitude === 0) || (
					$.Latitude >= 34 &&
					$.Latitude <= 72 &&
					$.Longitude >= -25 &&
					$.Longitude <= 45
				)
			)
		]]></rule_code>
	</check>


</checks>
